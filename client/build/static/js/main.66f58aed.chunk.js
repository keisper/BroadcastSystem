(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,n){},122:function(e,n){},124:function(e,n){},138:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(60),o=t.n(c),i=(t(76),t(67)),u=t(8),l=t(140),s=function(e){return a.a.createElement("button",{onClick:function(){var n=Object(l.a)();e.history.push("/room/".concat(n))}},"Create room")},m=t(69),d=t(70),f=t(29),g=t(61),p=t.n(g),v=t(30),h=t.n(v),E=t(32),b=t(62);function j(){var e=Object(f.a)(["\n    height: 40%;\n    width: 50%;\n"]);return j=function(){return e},e}function w(){var e=Object(f.a)(["\n    padding: 20px;\n    display: flex;\n    height: 100vh;\n    width: 90%;\n    margin: auto;\n    flex-wrap: wrap;\n"]);return w=function(){return e},e}var O=E.a.div(w()),R=E.a.video(j()),y=function(e){var n=Object(r.useRef)();return Object(r.useEffect)((function(){e.peer.on("stream",(function(e){n.current.srcObject=e}))}),[]),a.a.createElement(R,{playsInline:!0,autoPlay:!0,ref:n})},I={height:window.innerHeight/2,width:window.innerWidth/2},k=function(e){var n=Object(r.useState)([]),t=Object(d.a)(n,2),c=t[0],o=t[1],i=Object(r.useRef)(),u=Object(r.useRef)(),l=Object(r.useRef)(),s=Object(r.useRef)([]),f=e.match.params.roomID,g=Object(b.a)(),v=g.isRecording,E=g.recording,j=g.toggleRecording;return Object(r.useEffect)((function(){i.current=p.a.connect("/"),navigator.mediaDevices.getUserMedia({video:I,audio:!0}).then((function(e){navigator.mediaDevices.getDisplayMedia({video:!0}).then((function(n){console.log(n),l.current.srcObject=n,u.current.srcObject=e,i.current.emit("join room",f),i.current.on("all users",(function(n){var t=[];n.forEach((function(n){var r=function(e,n,t){var r=new h.a({initiator:!0,trickle:!1,stream:t});return r.on("signal",(function(t){i.current.emit("sending signal",{userToSignal:e,callerID:n,signal:t})})),r}(n,i.current.id,e);s.current.push({peerID:n,peer:r}),t.push(r)})),o(t)})),i.current.on("user joined",(function(n){var t=function(e,n,t){var r=new h.a({initiator:!1,trickle:!1,stream:t});return r.on("signal",(function(e){i.current.emit("returning signal",{signal:e,callerID:n})})),r.signal(e),r}(n.signal,n.callerID,e);s.current.push({peerID:n.callerID,peer:t}),o((function(e){return[].concat(Object(m.a)(e),[t])}))})),i.current.on("receiving returned signal",(function(e){s.current.find((function(n){return n.peerID===e.id})).peer.signal(e.signal)}))}))}))}),[]),a.a.createElement(O,null,a.a.createElement("div",null,a.a.createElement("button",{onClick:j},v?"Stop":"Start Recording"),!!E&&a.a.createElement("video",{autoPlay:!0,src:E&&URL.createObjectURL(E)}),a.a.createElement("button",{onClick:void console.log(u)},"test ")),a.a.createElement(R,{muted:!0,ref:u,autoPlay:!0,playsInline:!0}),a.a.createElement(R,{muted:!0,ref:l,autoPlay:!0,playsInline:!0}),c.map((function(e,n){return a.a.createElement(y,{key:n,peer:e})})))},D=t(66),S=function(){return a.a.createElement("div",null,a.a.createElement(D.ReactMediaRecorder,{video:!0,render:function(e){var n=e.status,t=e.startRecording,r=e.stopRecording,c=e.mediaBlobUrl;return a.a.createElement("div",null,a.a.createElement("p",null,n),a.a.createElement("button",{onClick:t},"Start Recording"),a.a.createElement("button",{onClick:r},"Stop Recording"),a.a.createElement("video",{src:c,controls:!0,autoplay:!0,loop:!0}))}}))};var C=function(){return a.a.createElement(i.a,null,a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/",exact:!0,component:s}),a.a.createElement(u.a,{path:"/room/:roomID",component:k}),a.a.createElement(u.a,{path:"/test",component:S})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,n,t){e.exports=t(138)},76:function(e,n,t){}},[[71,1,2]]]);
//# sourceMappingURL=main.66f58aed.chunk.js.map